<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axis VoiceSeal — Frontend Prototype</title>
    <style>
        :root {
            --primary: #A80534;
            --primary-dark: #8a0429;
            --primary-light: #e6b3c2;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --dark: #343a40;
            --light: #f8f9fa;
            --gray: #6c757d;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        /* Header & Navigation */
        header {
            background-color: white;
            box-shadow: var(--box-shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo {
            height: 40px;
        }

        .nav-title {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.5rem;
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
        }

        .nav-link {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }

        .nav-link:hover {
            background-color: var(--primary-light);
            color: var(--primary);
        }

        .nav-link.active {
            background-color: var(--primary);
            color: white;
        }

        .admin-toggle {
            background-color: var(--dark);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
        }

        .admin-toggle:hover {
            background-color: #495057;
        }

        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: var(--border-radius);
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Cards */
        .card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 2rem;
            margin-bottom: 2rem;
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .card-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
            border-bottom: 2px solid var(--primary-light);
            padding-bottom: 0.5rem;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(168, 5, 52, 0.2);
        }

        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }

        .btn:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #218838;
        }

        .btn-danger {
            background-color: var(--danger);
        }

        .btn-danger:hover {
            background-color: #c82333;
        }

        .btn-warning {
            background-color: var(--warning);
            color: var(--dark);
        }

        .btn-warning:hover {
            background-color: #e0a800;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        /* Verification Result */
        .result-container {
            margin-top: 2rem;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            animation: fadeIn 0.5s ease;
        }

        .verified {
            background-color: rgba(40, 167, 69, 0.1);
            border-left: 4px solid var(--success);
        }

        .fraud {
            background-color: rgba(220, 53, 69, 0.1);
            border-left: 4px solid var(--danger);
        }

        .unknown {
            background-color: rgba(255, 193, 7, 0.1);
            border-left: 4px solid var(--warning);
        }

        .result-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .copy-message {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin: 1rem 0;
            border: 1px dashed #dee2e6;
            cursor: pointer;
            transition: var(--transition);
        }

        .copy-message:hover {
            background-color: #e9ecef;
        }

        /* File Preview */
        .file-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        .preview-item {
            position: relative;
            width: 150px;
            height: 150px;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }

        .preview-item img, .preview-item audio {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-file {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(220, 53, 69, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        /* Admin Dashboard */
        .admin-panel {
            display: none;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--box-shadow);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .total-reports {
            border-top: 4px solid var(--primary);
        }

        .fraud-flags {
            border-top: 4px solid var(--danger);
        }

        .verified-numbers {
            border-top: 4px solid var(--success);
        }

        .reports-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            background-color: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }

        .reports-table th, .reports-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .reports-table th {
            background-color: var(--primary);
            color: white;
            font-weight: 500;
        }

        .reports-table tr:hover {
            background-color: #f8f9fa;
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }

        .status-under-review {
            background-color: #cce7ff;
            color: #004085;
        }

        .status-reported {
            background-color: #f8d7da;
            color: #721c24;
        }

        .status-resolved {
            background-color: #d4edda;
            color: #155724;
        }

        .action-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .action-btn {
            padding: 0.25rem 0.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: white;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.3s ease;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--primary);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid #dee2e6;
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 1.5rem;
        }

        .tab {
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
        }

        .tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 1.5s infinite;
        }

        /* Security Notice */
        .security-notice {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }

            .reports-table {
                display: block;
                overflow-x: auto;
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="navbar">
            <div class="logo-container">
                <div class="logo" style="background-color: #A80534; width: 40px; height: 40px; border-radius: 50%;"></div>
                <div class="nav-title">Axis VoiceSeal — Demo</div>
            </div>
            <div class="nav-links">
                <a href="#verification" class="nav-link active">Verification</a>
                <a href="#report" class="nav-link">Report Fraud</a>
                <a href="#admin" class="nav-link">Admin Dashboard</a>
            </div>
            <button class="admin-toggle" id="adminToggle">Admin Mode</button>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Security Notice -->
        <div class="security-notice">
            <strong>Security Notice:</strong> This is a frontend-only demo. No real data is transmitted to external servers. All files and reports stay in your browser's localStorage unless you click "Simulate Send".
        </div>

        <!-- Hero Section -->
        <div class="hero">
            <h1>Protect Yourself from Phone Fraud</h1>
            <p>Verify unknown callers and report suspicious activity with Axis VoiceSeal — your trusted partner in financial security.</p>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <div class="tab active" data-tab="verification">Number Verification</div>
            <div class="tab" data-tab="report">Report Fraud</div>
            <div class="tab" data-tab="admin">Admin Dashboard</div>
        </div>

        <!-- Verification Tab -->
        <div id="verification" class="tab-content active">
            <div class="card">
                <h2 class="card-title">Verify Phone Number</h2>
                <p>Enter a 10-12 digit phone number to check if it's an official Axis Bank number or a known fraudulent number.</p>
                
                <div class="form-group">
                    <label for="phoneInput" class="form-label">Phone Number</label>
                    <input type="text" id="phoneInput" class="form-control" placeholder="Enter 10-12 digit phone number" maxlength="12">
                </div>
                
                <button id="verifyBtn" class="btn btn-block">Verify Number</button>
                
                <div id="verificationResult" class="result-container" style="display: none;"></div>
            </div>
        </div>

        <!-- Report Tab -->
        <div id="report" class="tab-content">
            <div class="card">
                <h2 class="card-title">Report Suspicious Call</h2>
                <form id="reportForm">
                    <div class="form-group">
                        <label for="reportPhone" class="form-label">Phone Number *</label>
                        <input type="text" id="reportPhone" class="form-control" placeholder="Enter phone number of suspicious caller" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="callDateTime" class="form-label">Call Date & Time *</label>
                        <input type="datetime-local" id="callDateTime" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="callerName" class="form-label">Caller Name (if known)</label>
                        <input type="text" id="callerName" class="form-control" placeholder="Enter caller name">
                    </div>
                    
                    <div class="form-group">
                        <label for="callRecording" class="form-label">Call Recording (optional)</label>
                        <input type="file" id="callRecording" class="form-control" accept="audio/*">
                        <div id="recordingPreview" class="file-preview"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="screenshot" class="form-label">Screenshot (optional)</label>
                        <input type="file" id="screenshot" class="form-control" accept="image/*">
                        <div id="screenshotPreview" class="file-preview"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="description" class="form-label">Detailed Description *</label>
                        <textarea id="description" class="form-control" rows="4" placeholder="Please describe the call in detail..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <div>
                            <input type="checkbox" id="consentCheck" checked>
                            <label for="consentCheck">I consent to share this information with Axis Bank Fraud Desk and Local Cyber Crime Cell</label>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-block">Submit Report</button>
                </form>
            </div>
        </div>

        <!-- Admin Dashboard -->
        <div id="admin" class="tab-content">
            <div class="admin-panel" id="adminPanel">
                <div class="card">
                    <h2 class="card-title">Admin Dashboard</h2>
                    
                    <div class="stats-container">
                        <div class="stat-card total-reports">
                            <div class="stat-number" id="totalReports">0</div>
                            <div class="stat-label">Total Reports</div>
                        </div>
                        <div class="stat-card fraud-flags">
                            <div class="stat-number" id="fraudFlags">0</div>
                            <div class="stat-label">Fraud Flags</div>
                        </div>
                        <div class="stat-card verified-numbers">
                            <div class="stat-number" id="verifiedNumbers">2</div>
                            <div class="stat-label">Verified Numbers</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <input type="text" id="searchReports" class="form-control" placeholder="Search by phone number...">
                    </div>
                    
                    <div class="table-responsive">
                        <table class="reports-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Phone Number</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="reportsTableBody">
                                <!-- Reports will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="card">
                    <h2 class="card-title">Manage Number Database</h2>
                    <div class="form-group">
                        <label for="addNumber" class="form-label">Add/Update Number</label>
                        <input type="text" id="addNumber" class="form-control" placeholder="Enter phone number">
                    </div>
                    <div class="form-group">
                        <label for="numberType" class="form-label">Number Type</label>
                        <select id="numberType" class="form-control">
                            <option value="verified">Verified</option>
                            <option value="fraud">Fraud</option>
                        </select>
                    </div>
                    <button id="addNumberBtn" class="btn">Add/Update Number</button>
                    
                    <div class="form-group" style="margin-top: 2rem;">
                        <h3>Verified Numbers</h3>
                        <div id="verifiedNumbersList" class="form-control" style="height: 100px; overflow-y: auto;"></div>
                    </div>
                    
                    <div class="form-group">
                        <h3>Fraud Numbers</h3>
                        <div id="fraudNumbersList" class="form-control" style="height: 100px; overflow-y: auto;"></div>
                    </div>
                </div>
            </div>
            
            <div id="adminLogin" class="card">
                <h2 class="card-title">Admin Access Required</h2>
                <p>Please enter the admin password to access the dashboard.</p>
                <div class="form-group">
                    <label for="adminPassword" class="form-label">Password</label>
                    <input type="password" id="adminPassword" class="form-control" placeholder="Enter admin password">
                </div>
                <button id="adminLoginBtn" class="btn">Login</button>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="emailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Send Report to Bank Fraud Desk</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>This would send an email to: <strong>fraud.reporting@axisbank-demo.com</strong></p>
                <div class="form-group">
                    <label class="form-label">Subject</label>
                    <input type="text" class="form-control" value="VoiceSeal Fraud Report - [ID]" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Message Body</label>
                    <textarea class="form-control" rows="6" readonly>Dear Axis Bank Fraud Desk,

We are submitting a fraud report through the VoiceSeal system.

[Report details would be included here]

Please review and take appropriate action.

Regards,
Axis VoiceSeal System</textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="closeEmailModal">Cancel</button>
                <button class="btn btn-success" id="sendEmailBtn">Simulate Send</button>
            </div>
        </div>
    </div>

    <div id="cyberModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Send Report to Cyber Crime Cell</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>This would send an email to: <strong>cybercell@local-demo.gov.in</strong></p>
                <div class="form-group">
                    <label class="form-label">Subject</label>
                    <input type="text" class="form-control" value="Cyber Crime Report - Voice Fraud - [ID]" readonly>
                </div>
                <div class="form-group">
                    <label class="form-label">Message Body</label>
                    <textarea class="form-control" rows="6" readonly>Dear Cyber Crime Cell,

We are submitting a report of suspected voice phishing (vishing) fraud.

[Report details would be included here]

Please investigate this matter.

Regards,
Axis VoiceSeal System</textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" id="closeCyberModal">Cancel</button>
                <button class="btn btn-success" id="sendCyberBtn">Simulate Send</button>
            </div>
        </div>
    </div>

    <div id="evidenceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Evidence Pack</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <pre id="evidenceJson" style="background: #f8f9fa; padding: 1rem; border-radius: var(--border-radius); overflow: auto; max-height: 400px;"></pre>
            </div>
            <div class="modal-footer">
                <button class="btn" id="closeEvidenceModal">Close</button>
                <button class="btn btn-success" id="downloadEvidenceBtn">Download Evidence Pack</button>
            </div>
        </div>
    </div>

    <script>
        // Database initialization
        const initializeDatabase = () => {
            if (!localStorage.getItem('voiceSeal_verifiedNumbers')) {
                localStorage.setItem('voiceSeal_verifiedNumbers', JSON.stringify(["18604195555", "18605005555"]));
            }
            
            if (!localStorage.getItem('voiceSeal_fraudNumbers')) {
                localStorage.setItem('voiceSeal_fraudNumbers', JSON.stringify(["9594264769", "9876543210"]));
            }
            
            if (!localStorage.getItem('voiceSeal_reports')) {
                localStorage.setItem('voiceSeal_reports', JSON.stringify([]));
            }
            
            if (!localStorage.getItem('voiceSeal_reportId')) {
                localStorage.setItem('voiceSeal_reportId', '1000');
            }
        };

        // Get data from localStorage
        const getVerifiedNumbers = () => JSON.parse(localStorage.getItem('voiceSeal_verifiedNumbers') || '[]');
        const getFraudNumbers = () => JSON.parse(localStorage.getItem('voiceSeal_fraudNumbers') || '[]');
        const getReports = () => JSON.parse(localStorage.getItem('voiceSeal_reports') || '[]');
        const getNextReportId = () => {
            const id = parseInt(localStorage.getItem('voiceSeal_reportId') || '1000');
            localStorage.setItem('voiceSeal_reportId', (id + 1).toString());
            return id;
        };

        // Save reports to localStorage
        const saveReport = (report) => {
            const reports = getReports();
            reports.push(report);
            localStorage.setItem('voiceSeal_reports', JSON.stringify(reports));
        };

        // Update report status
        const updateReportStatus = (reportId, status) => {
            const reports = getReports();
            const reportIndex = reports.findIndex(r => r.id === reportId);
            if (reportIndex !== -1) {
                reports[reportIndex].status = status;
                localStorage.setItem('voiceSeal_reports', JSON.stringify(reports));
                return true;
            }
            return false;
        };

        // Add number to database
        const addNumberToDatabase = (number, type) => {
            if (type === 'verified') {
                const verifiedNumbers = getVerifiedNumbers();
                if (!verifiedNumbers.includes(number)) {
                    verifiedNumbers.push(number);
                    localStorage.setItem('voiceSeal_verifiedNumbers', JSON.stringify(verifiedNumbers));
                }
            } else if (type === 'fraud') {
                const fraudNumbers = getFraudNumbers();
                if (!fraudNumbers.includes(number)) {
                    fraudNumbers.push(number);
                    localStorage.setItem('voiceSeal_fraudNumbers', JSON.stringify(fraudNumbers));
                }
            }
        };

        // Remove number from database
        const removeNumberFromDatabase = (number, type) => {
            if (type === 'verified') {
                const verifiedNumbers = getVerifiedNumbers();
                const index = verifiedNumbers.indexOf(number);
                if (index !== -1) {
                    verifiedNumbers.splice(index, 1);
                    localStorage.setItem('voiceSeal_verifiedNumbers', JSON.stringify(verifiedNumbers));
                }
            } else if (type === 'fraud') {
                const fraudNumbers = getFraudNumbers();
                const index = fraudNumbers.indexOf(number);
                if (index !== -1) {
                    fraudNumbers.splice(index, 1);
                    localStorage.setItem('voiceSeal_fraudNumbers', JSON.stringify(fraudNumbers));
                }
            }
        };

        // Format phone number
        const formatPhoneNumber = (phone) => {
            // Remove all non-digit characters
            const cleaned = phone.replace(/\D/g, '');
            
            // Check if the number has the correct length
            if (cleaned.length < 10 || cleaned.length > 12) {
                return null;
            }
            
            return cleaned;
        };

        // Verify phone number
        const verifyPhoneNumber = (phone) => {
            const formattedPhone = formatPhoneNumber(phone);
            if (!formattedPhone) {
                return { status: 'invalid', message: 'Please enter a valid 10-12 digit phone number.' };
            }
            
            const verifiedNumbers = getVerifiedNumbers();
            const fraudNumbers = getFraudNumbers();
            
            if (verifiedNumbers.includes(formattedPhone)) {
                return { 
                    status: 'verified', 
                    message: 'This number is verified as an official Axis Bank number.',
                    details: 'Branch: Customer Care, Location: Mumbai',
                    advisory: 'This is an official Axis call. You can proceed with confidence.'
                };
            } else if (fraudNumbers.includes(formattedPhone)) {
                return { 
                    status: 'fraud', 
                    message: 'WARNING: This number is reported as fraudulent!',
                    summary: 'Multiple reports indicate this number is being used for phishing attempts.',
                    victimMessage: 'I just verified a suspicious call through Axis VoiceSeal. This number ' + formattedPhone + ' is flagged as fraudulent. Stay alert and report any suspicious calls! #AxisVoiceSeal #FraudPrevention'
                };
            } else {
                return { 
                    status: 'unknown', 
                    message: 'This number was not found in our official database.',
                    advisory: 'If you received a suspicious call from this number, please report it using the form below.'
                };
            }
        };

        // Generate evidence JSON
        const generateEvidencePack = (report) => {
            return {
                reportId: report.id,
                phoneNumber: report.phone,
                callDateTime: report.dateTime,
                callerName: report.callerName || 'Unknown',
                description: report.description,
                timestamp: report.timestamp,
                consent: report.consent,
                files: {
                    recording: report.recording ? report.recording.name : 'Not provided',
                    screenshot: report.screenshot ? report.screenshot.name : 'Not provided'
                }
            };
        };

        // Download JSON as file
        const downloadJSON = (data, filename) => {
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        };

        // Display verification result
        const displayVerificationResult = (result) => {
            const resultContainer = document.getElementById('verificationResult');
            resultContainer.style.display = 'block';
            
            if (result.status === 'verified') {
                resultContainer.className = 'result-container verified';
                resultContainer.innerHTML = `
                    <div class="result-title" style="color: var(--success);">✓ Verified Number</div>
                    <p>${result.message}</p>
                    <p><strong>Details:</strong> ${result.details}</p>
                    <p><strong>Advisory:</strong> ${result.advisory}</p>
                    <div class="copy-message" onclick="copyToClipboard(this)">
                        <strong>Share on social media:</strong><br>
                        "I just verified a call through Axis VoiceSeal. This number is confirmed as an official Axis Bank contact. Stay secure! #AxisVoiceSeal #SafeBanking"
                    </div>
                `;
            } else if (result.status === 'fraud') {
                resultContainer.className = 'result-container fraud';
                resultContainer.innerHTML = `
                    <div class="result-title" style="color: var(--danger);">⚠ Fraudulent Number</div>
                    <p>${result.message}</p>
                    <p><strong>Summary:</strong> ${result.summary}</p>
                    <div class="copy-message" onclick="copyToClipboard(this)">
                        <strong>Share warning:</strong><br>
                        ${result.victimMessage}
                    </div>
                    <button class="btn btn-danger btn-block pulse" style="margin-top: 1rem;" onclick="switchToReportTab('${document.getElementById('phoneInput').value}')">Report Now</button>
                `;
            } else if (result.status === 'unknown') {
                resultContainer.className = 'result-container unknown';
                resultContainer.innerHTML = `
                    <div class="result-title" style="color: var(--warning);">? Unknown Number</div>
                    <p>${result.message}</p>
                    <p><strong>Advisory:</strong> ${result.advisory}</p>
                    <div class="copy-message" onclick="copyToClipboard(this)">
                        <strong>Share cautiously:</strong><br>
                        "I verified a number through Axis VoiceSeal. It's not in their official database. If you receive calls from this number, be cautious and report if suspicious. #AxisVoiceSeal #StayAlert"
                    </div>
                    <button class="btn btn-warning btn-block" style="margin-top: 1rem;" onclick="switchToReportTab('${document.getElementById('phoneInput').value}')">Report Suspicious Activity</button>
                `;
            } else {
                resultContainer.className = 'result-container unknown';
                resultContainer.innerHTML = `
                    <div class="result-title" style="color: var(--danger);">Error</div>
                    <p>${result.message}</p>
                `;
            }
        };

        // Copy to clipboard
        const copyToClipboard = (element) => {
            const text = element.innerText.replace('Share on social media:', '').replace('Share warning:', '').replace('Share cautiously:', '').trim();
            navigator.clipboard.writeText(text).then(() => {
                const originalText = element.innerHTML;
                element.innerHTML = '<strong>Copied to clipboard!</strong>';
                setTimeout(() => {
                    element.innerHTML = originalText;
                }, 2000);
            });
        };

        // Switch to report tab with phone number prefilled
        const switchToReportTab = (phoneNumber) => {
            // Switch to report tab
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === 'report') {
                    tab.classList.add('active');
                }
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
                if (content.id === 'report') {
                    content.classList.add('active');
                }
            });
            
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#report') {
                    link.classList.add('active');
                }
            });
            
            // Prefill phone number
            document.getElementById('reportPhone').value = phoneNumber;
        };

        // Update admin dashboard
        const updateAdminDashboard = () => {
            const reports = getReports();
            const verifiedNumbers = getVerifiedNumbers();
            const fraudNumbers = getFraudNumbers();
            
            // Update stats
            document.getElementById('totalReports').textContent = reports.length;
            document.getElementById('fraudFlags').textContent = fraudNumbers.length;
            document.getElementById('verifiedNumbers').textContent = verifiedNumbers.length;
            
            // Update reports table
            const tableBody = document.getElementById('reportsTableBody');
            tableBody.innerHTML = '';
            
            const searchTerm = document.getElementById('searchReports').value.toLowerCase();
            
            reports.filter(report => 
                report.phone.toLowerCase().includes(searchTerm) || 
                report.id.toString().includes(searchTerm)
            ).forEach(report => {
                const row = document.createElement('tr');
                
                // Format date
                const reportDate = new Date(report.timestamp);
                const formattedDate = reportDate.toLocaleDateString() + ' ' + reportDate.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                row.innerHTML = `
                    <td>${report.id}</td>
                    <td>${report.phone}</td>
                    <td>${formattedDate}</td>
                    <td><span class="status-badge status-${report.status.replace(' ', '-').toLowerCase()}">${report.status}</span></td>
                    <td class="action-buttons">
                        <button class="action-btn" onclick="viewReport(${report.id})" style="background: var(--primary); color: white;">View</button>
                        <select class="action-btn" onchange="updateReportStatus(${report.id}, this.value)" style="background: white; border: 1px solid #ddd;">
                            <option value="Pending" ${report.status === 'Pending' ? 'selected' : ''}>Pending</option>
                            <option value="Under Review" ${report.status === 'Under Review' ? 'selected' : ''}>Under Review</option>
                            <option value="Reported to Police" ${report.status === 'Reported to Police' ? 'selected' : ''}>Reported to Police</option>
                            <option value="Resolved" ${report.status === 'Resolved' ? 'selected' : ''}>Resolved</option>
                        </select>
                        <button class="action-btn" onclick="downloadEvidence(${report.id})" style="background: var(--success); color: white;">Evidence</button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            // Update number lists
            document.getElementById('verifiedNumbersList').innerHTML = verifiedNumbers.map(num => 
                `<div style="display: flex; justify-content: space-between; padding: 0.25rem 0;">
                    <span>${num}</span>
                    <button onclick="removeNumberFromUI('${num}', 'verified')" style="background: var(--danger); color: white; border: none; border-radius: 3px; padding: 0.1rem 0.3rem; font-size: 0.7rem;">Remove</button>
                </div>`
            ).join('');
            
            document.getElementById('fraudNumbersList').innerHTML = fraudNumbers.map(num => 
                `<div style="display: flex; justify-content: space-between; padding: 0.25rem 0;">
                    <span>${num}</span>
                    <button onclick="removeNumberFromUI('${num}', 'fraud')" style="background: var(--danger); color: white; border: none; border-radius: 3px; padding: 0.1rem 0.3rem; font-size: 0.7rem;">Remove</button>
                </div>`
            ).join('');
        };

        // View report details
        const viewReport = (reportId) => {
            const reports = getReports();
            const report = reports.find(r => r.id === reportId);
            
            if (report) {
                const evidence = generateEvidencePack(report);
                document.getElementById('evidenceJson').textContent = JSON.stringify(evidence, null, 2);
                document.getElementById('evidenceModal').style.display = 'flex';
                
                // Set up download button
                document.getElementById('downloadEvidenceBtn').onclick = () => {
                    downloadJSON(evidence, `voiceSeal_evidence_${reportId}.json`);
                };
            }
        };

        // Download evidence for a report
        const downloadEvidence = (reportId) => {
            const reports = getReports();
            const report = reports.find(r => r.id === reportId);
            
            if (report) {
                const evidence = generateEvidencePack(report);
                downloadJSON(evidence, `voiceSeal_evidence_${reportId}.json`);
            }
        };

        // Remove number from UI and database
        const removeNumberFromUI = (number, type) => {
            if (confirm(`Are you sure you want to remove ${number} from the ${type} numbers list?`)) {
                removeNumberFromDatabase(number, type);
                updateAdminDashboard();
            }
        };

        // Global function for updating report status
        window.updateReportStatus = (reportId, status) => {
            if (updateReportStatus(reportId, status)) {
                updateAdminDashboard();
                alert(`Report ${reportId} status updated to ${status}`);
            }
        };

        // File preview handling
        const setupFilePreviews = () => {
            // Call recording preview
            document.getElementById('callRecording').addEventListener('change', function(e) {
                const file = e.target.files[0];
                const previewContainer = document.getElementById('recordingPreview');
                
                if (file) {
                    const url = URL.createObjectURL(file);
                    const previewItem = document.createElement('div');
                    previewItem.className = 'preview-item';
                    previewItem.innerHTML = `
                        <audio controls src="${url}"></audio>
                        <button class="remove-file" onclick="removeFilePreview(this, 'callRecording')">&times;</button>
                    `;
                    previewContainer.appendChild(previewItem);
                }
            });
            
            // Screenshot preview
            document.getElementById('screenshot').addEventListener('change', function(e) {
                const file = e.target.files[0];
                const previewContainer = document.getElementById('screenshotPreview');
                
                if (file) {
                    const url = URL.createObjectURL(file);
                    const previewItem = document.createElement('div');
                    previewItem.className = 'preview-item';
                    previewItem.innerHTML = `
                        <img src="${url}" alt="Screenshot preview">
                        <button class="remove-file" onclick="removeFilePreview(this, 'screenshot')">&times;</button>
                    `;
                    previewContainer.appendChild(previewItem);
                }
            });
        };

        // Remove file preview
        window.removeFilePreview = (button, inputId) => {
            const previewItem = button.parentElement;
            previewItem.remove();
            document.getElementById(inputId).value = '';
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize database
            initializeDatabase();
            
            // Set up file previews
            setupFilePreviews();
            
            // Set current date and time for report form
            const now = new Date();
            const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000).toISOString().slice(0, 16);
            document.getElementById('callDateTime').value = localDateTime;
            
            // Tab switching
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Update tabs
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Update tab content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                        if (content.id === tabId) {
                            content.classList.add('active');
                        }
                    });
                    
                    // Update nav links
                    document.querySelectorAll('.nav-link').forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${tabId}`) {
                            link.classList.add('active');
                        }
                    });
                    
                    // If admin tab, check if admin is logged in
                    if (tabId === 'admin' && !localStorage.getItem('voiceSeal_adminLoggedIn')) {
                        document.getElementById('adminPanel').style.display = 'none';
                        document.getElementById('adminLogin').style.display = 'block';
                    } else if (tabId === 'admin') {
                        document.getElementById('adminPanel').style.display = 'block';
                        document.getElementById('adminLogin').style.display = 'none';
                        updateAdminDashboard();
                    }
                });
            });
            
            // Nav link clicking
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabId = link.getAttribute('href').substring(1);
                    
                    // Find and click the corresponding tab
                    document.querySelectorAll('.tab').forEach(tab => {
                        if (tab.getAttribute('data-tab') === tabId) {
                            tab.click();
                        }
                    });
                });
            });
            
            // Number verification
            document.getElementById('verifyBtn').addEventListener('click', () => {
                const phoneInput = document.getElementById('phoneInput').value;
                const result = verifyPhoneNumber(phoneInput);
                displayVerificationResult(result);
            });
            
            // Report form submission
            document.getElementById('reportForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                // Get form values
                const phone = document.getElementById('reportPhone').value;
                const dateTime = document.getElementById('callDateTime').value;
                const callerName = document.getElementById('callerName').value;
                const description = document.getElementById('description').value;
                const consent = document.getElementById('consentCheck').checked;
                
                // Create report object
                const report = {
                    id: getNextReportId(),
                    phone: formatPhoneNumber(phone) || phone,
                    dateTime: dateTime,
                    callerName: callerName,
                    description: description,
                    consent: consent,
                    status: 'Pending',
                    timestamp: new Date().toISOString()
                };
                
                // Save report
                saveReport(report);
                
                // Show success message
                alert(`Report submitted successfully! Your report ID is ${report.id}.`);
                
                // Reset form
                document.getElementById('reportForm').reset();
                document.getElementById('recordingPreview').innerHTML = '';
                document.getElementById('screenshotPreview').innerHTML = '';
                
                // Show evidence pack
                const evidence = generateEvidencePack(report);
                document.getElementById('evidenceJson').textContent = JSON.stringify(evidence, null, 2);
                document.getElementById('evidenceModal').style.display = 'flex';
                
                // Set up download button
                document.getElementById('downloadEvidenceBtn').onclick = () => {
                    downloadJSON(evidence, `voiceSeal_evidence_${report.id}.json`);
                };
                
                // Update admin dashboard if visible
                if (document.getElementById('adminPanel').style.display !== 'none') {
                    updateAdminDashboard();
                }
            });
            
            // Admin login
            document.getElementById('adminLoginBtn').addEventListener('click', () => {
                const password = document.getElementById('adminPassword').value;
                if (password === 'demoAdmin123') {
                    localStorage.setItem('voiceSeal_adminLoggedIn', 'true');
                    document.getElementById('adminPanel').style.display = 'block';
                    document.getElementById('adminLogin').style.display = 'none';
                    updateAdminDashboard();
                } else {
                    alert('Incorrect password. Please try again.');
                }
            });
            
            // Admin toggle
            document.getElementById('adminToggle').addEventListener('click', () => {
                if (localStorage.getItem('voiceSeal_adminLoggedIn')) {
                    localStorage.removeItem('voiceSeal_adminLoggedIn');
                    document.getElementById('adminToggle').textContent = 'Admin Mode';
                    alert('Admin mode disabled.');
                    
                    // If on admin tab, switch to verification
                    if (document.querySelector('.tab.active').getAttribute('data-tab') === 'admin') {
                        document.querySelector('.tab[data-tab="verification"]').click();
                    }
                } else {
                    const password = prompt('Enter admin password:');
                    if (password === 'demoAdmin123') {
                        localStorage.setItem('voiceSeal_adminLoggedIn', 'true');
                        document.getElementById('adminToggle').textContent = 'Exit Admin';
                        alert('Admin mode enabled.');
                    } else {
                        alert('Incorrect password.');
                    }
                }
            });
            
            // Add number to database
            document.getElementById('addNumberBtn').addEventListener('click', () => {
                const number = document.getElementById('addNumber').value;
                const type = document.getElementById('numberType').value;
                
                if (!formatPhoneNumber(number)) {
                    alert('Please enter a valid 10-12 digit phone number.');
                    return;
                }
                
                addNumberToDatabase(formatPhoneNumber(number), type);
                document.getElementById('addNumber').value = '';
                updateAdminDashboard();
                alert(`Number ${number} added to ${type} database.`);
            });
            
            // Search reports
            document.getElementById('searchReports').addEventListener('input', updateAdminDashboard);
            
            // Modal close handlers
            document.querySelectorAll('.close-modal, #closeEmailModal, #closeCyberModal, #closeEvidenceModal').forEach(button => {
                button.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                });
            });
            
            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                }
            });
            
            // Simulate email send
            document.getElementById('sendEmailBtn').addEventListener('click', () => {
                alert('Email sent to Bank Fraud Desk (simulated).');
                document.getElementById('emailModal').style.display = 'none';
            });
            
            document.getElementById('sendCyberBtn').addEventListener('click', () => {
                alert('Email sent to Cyber Crime Cell (simulated).');
                document.getElementById('cyberModal').style.display = 'none';
            });
            
            // Test cases
            console.log('Test Cases:');
            console.log('1. Input 18604195555 → Verified flow');
            console.log('2. Input 9594264769 → Fraud flow');
            console.log('3. Create a full report → see it in Admin Dashboard');
        });
    </script>
</body>
</html>
